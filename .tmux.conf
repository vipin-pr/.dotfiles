############################
# Terminal & Colors
############################
# Enable 256 colors
set -g default-terminal "xterm-256color"

############################
# Prefix Key
############################
# Unbind the default prefix
unbind C-b

# Set the new prefix to Ctrl+k
set-option -g prefix C-k

# Bind the new prefix key to send the prefix signal
bind C-k send-prefix

############################
# Window Management
############################
# Custom keybindings using Ctrl+k as the prefix
bind n new-window -c "#{pane_current_path}"    # Create a new window
bind j next-window                             # Switch to the next window
bind h previous-window                         # Switch to the previous window
bind w choose-window                           # List all windows and navigate between them
bind r command-prompt "rename-window '%%'"     # Rename the current window
bind e confirm-before "kill-window"           # Close the current window

# Set Ctrl+j for next window (no prefix)
bind -n C-j next-window

############################
# Pane Management
############################
# Alt + Arrow keys for pane navigation
bind M-Left select-pane -L
bind M-Down select-pane -D
bind M-Up select-pane -U
bind M-Right select-pane -R

# Synchronize panes
bind-key y set-window-option synchronize-panes \; display-message "synchronize mode toggled."

# Horizontal and vertical splits
bind-key - split-window -v -c "#{pane_current_path}"   # Horizontal split
bind-key | split-window -h -c "#{pane_current_path}"   # Vertical split

# Pane resizing (custom keys, repeatable)
bind -r , resize-pane -L 10
bind -r . resize-pane -R 10
bind -r m resize-pane -U 10
bind -r / resize-pane -D 10

# Swap windows
bind-key -n C-S-Left swap-window -d -t -1
bind-key -n C-S-Right swap-window -d -t +1

############################
# Copy Mode & Search
############################
# Unbind default C-f in copy mode
unbind-key -T copy-mode C-f

# Trigger reverse search using Ctrl+f after entering copy mode
bind-key -n C-f copy-mode \; send-keys /

############################
# Scrolling & Mouse
############################
set -g history-limit 40000
set -g mouse on

############################
# Reload Config
############################
bind-key -n C-o source-file ~/.tmux.conf \; display-message "tmux.conf reloaded."

############################
# Clipboard
############################
set -g set-clipboard on

############################
# Status Bar
############################
set -g status-position bottom
set -g status-bg colour233
set -g status-fg white
set -g status-justify centre

# Refresh status every 2 seconds
set -g status-interval 2

# Left: Git branch (updates automatically)
set -g status-left-length 40
set -g status-left '#(git -C "#{pane_current_path}" rev-parse --abbrev-ref HEAD 2>/dev/null | sed "s/^/î‚  /")'

# Right: weekday + date/time
set -g status-right-length 50
set -g status-right '#[fg=green]%a %d-%b-%y %H:%M'


# Window Status
set-window-option -g window-status-current-style fg=black,bg=green
